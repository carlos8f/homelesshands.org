<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>FreedomConnector Convio javascript example</title>
  <style type="text/css">
    body { padding: 2em 1em 2em 70px; margin: 0; font-family: sans-serif; color: black; background: white; }
    h2 { color: #00649A; }
    a { color: #00649A; text-decoration: none; }
    hr { margin: 2em 0; border: 1px solid black; }
    em { font-weight: normal; font-family: Georgia, serif; }
  </style>

  <!-- Embed the script library in the <head /> element like so: -->
  <script type="text/javascript">
  <!--//--><![CDATA[//><!--
  document.write(unescape("%3Cscript src='http" + (document.location.protocol == 'https:' ? 's' : '') + "://s3.amazonaws.com/connect.freedomworks.org/scripts/convio.js' type='text/javascript'%3E%3C/script%3E"));
  //--><!]]>
  </script>

</head>
<body>
<div id="page">

<h1>convio.js integration library</h1>

<h2>Embedding</h2>

<p>The library should be dynamically embedded in the <code>&lt;head/&gt;</code> tag, like so:</p>

<script src="https://gist.github.com/1097886.js?file=gistfile1.html" type="text/javascript"></script>

<hr />

<h2>FC_Convio.embedLoginButton( <em>[dest]</em> )</h2>
<p>Will trigger SSO flow to acquire an FC session (login/register) and then create a Convio session, redirecting to the desired URL.</p>

<p><code>dest</code> is a destination URL to redirect to after SSO. If ommitted, the current URL will be used.</p>

<h3>code</h3>

<script src="https://gist.github.com/1097893.js?file=gistfile1.js" type="text/javascript"></script>

<h3>result</h3>

<script type="text/javascript">
<!--//--><![CDATA[//><!--
FC_Convio.embedLoginButton('https://secure.freedomworks.org/site/SPageNavigator/alertcenter.html');
//--><!]]>
</script>

<hr />

<h2>FC_Convio.embedEditProfileLink()</h2>
<p>When logged into Convio, this URL enables the user to edit their "FreedomWorks profile" via FreedomConnector.</p>

<h3>code</h3>

<script src="https://gist.github.com/1097901.js?file=gistfile1.js" type="text/javascript"></script>

<h3>result</h3>

<script type="text/javascript">
<!--//--><![CDATA[//><!--
FC_Convio.embedEditProfileLink();
//--><!]]>
</script>

<hr />

<h2>FC_Convio.getPassthruURL( <em>[dest]</em> )</h2>
<p>Will pass the user to Convio and log them in if they have an active FC session.</p>
<p><code>dest</code> is a destination URL to redirect to after SSO. If ommitted, the current URL will be used.</p>

<h3>code</h3>

<script src="https://gist.github.com/1097905.js?file=gistfile1.js" type="text/javascript"></script>

<h3>result</h3>

<script type="text/javascript">
<!--//--><![CDATA[//><!--
var passthru_url = FC_Convio.getPassthruURL('https://secure.freedomworks.org/site/SPageNavigator/alertcenter.html');
document.writeln('<p><a href="' + passthru_url + '">' + passthru_url + '</a></p>');
//--><!]]>
</script>

<hr />

<h2>Other available methods:</h2>

<script src="https://gist.github.com/1097931.js?file=gistfile1.js" type="text/javascript"></script>

</div>
</body>
</html>
